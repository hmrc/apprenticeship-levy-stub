

EmployerAlignmentSubmission-descriptiveSample.xml-v3-2-To-v3-2



EmployerAlignmentSubmission-schemaValidSample.xml-v3-2-To-v3-2



EmployerAlignmentSubmission.sch-v3-2-To-v3-2



FullPaymentSubmission-2017-descriptiveSample-v2-1.xml-To-FullPaymentSubmission-2018-descriptiveSample-v0-1.xml

@@
 <?xml version="1.0" encoding="UTF-8"?>
 
-<hd:GovTalkMessage xmlns:dsig='http://www.w3.org/2000/09/xmldsig#' xmlns:fps='http://www.govtalk.gov.uk/taxation/PAYE/RTI/FullPaymentSubmission/16-17/2' xmlns:hd='http://www.govtalk.gov.uk/CM/envelope'>
+<hd:GovTalkMessage xmlns:dsig='http://www.w3.org/2000/09/xmldsig#' xmlns:fps='http://www.govtalk.gov.uk/taxation/PAYE/RTI/FullPaymentSubmission/17-18/1' xmlns:hd='http://www.govtalk.gov.uk/CM/envelope'>
   <hd:EnvelopeVersion>EnvelopeVersion</hd:EnvelopeVersion>
   <hd:Header>
     <hd:MessageDetails>
       <hd:Class>Identifier to allow gateway to determine target department, queue and validation needed.</hd:Class>
       <hd:Qualifier>eGIF Class qualifier</hd:Qualifier>
@@
               <fps:TaxablePay>Taxable pay in this pay period including payrolled benefits in kind</fps:TaxablePay>
               <fps:NonTaxOrNICPmt>Value of payments not subject to tax or NICs</fps:NonTaxOrNICPmt>
               <fps:DednsFromNetPay>Value of deductions from net pay in this pay period</fps:DednsFromNetPay>
               <fps:PayAfterStatDedns>Pay after Statutory deductions</fps:PayAfterStatDedns>
               <fps:BenefitsTaxedViaPayroll>Value of benefits taxed via the payroll in this pay period</fps:BenefitsTaxedViaPayroll>
+<!--DESCRIPTION of following node: Payrolled benefits-->
+              <fps:Benefits>
+<!--DESCRIPTION of following node: Car details-->
+                <fps:Car>
+                  <fps:Make>Make and model of car</fps:Make>
+                  <fps:CO2>CO2 emissions</fps:CO2>
+                  <fps:Fuel>Fuel type</fps:Fuel>
+                  <fps:ID>Car identifier</fps:ID>
+                  <fps:Amendment>Amendment indicator</fps:Amendment>
+                  <fps:Price>Calculated price</fps:Price>
+                  <fps:AvailFrom>Date car was available from</fps:AvailFrom>
+                  <fps:CashEquiv>Cash equivalent of car</fps:CashEquiv>
+                  <fps:AvailTo>Date car was available to</fps:AvailTo>
+<!--DESCRIPTION of following node: Free fuel-->
+                  <fps:FreeFuel>
+                    <fps:Provided>Date free fuel provided</fps:Provided>
+                    <fps:CashEquiv>Cash equivalent of fuel</fps:CashEquiv>
+                    <fps:Withdrawn>Date free fuel withdrawn</fps:Withdrawn>
+                  </fps:FreeFuel>
+                </fps:Car>
+              </fps:Benefits>
               <fps:EmpeePenContribnsPaid>Value of employee pension contributions paid under 'net pay arrangements' in pay period</fps:EmpeePenContribnsPaid>
               <fps:ItemsSubjectToClass1NIC>Items subject to Class 1 NIC but not taxed under PAYE regulations excluding pension contributions in pay period</fps:ItemsSubjectToClass1NIC>
               <fps:EmpeePenContribnsNotPaid>Value of employee pension contributions that are not paid under 'net pay arrangements' in pay period</fps:EmpeePenContribnsNotPaid>
               <fps:StudentLoanRecovered>Value of Student Loan repayment in this pay period</fps:StudentLoanRecovered>
               <fps:TaxDeductedOrRefunded>Value of tax deducted or refunded from this payment</fps:TaxDeductedOrRefunded>


FullPaymentSubmission-2017-schemaValidSample-v2-1.xml-To-FullPaymentSubmission-2018-schemaValidSample-v0-1.xml

@@
 <?xml version="1.0" encoding="UTF-8"?>
 
-<hd:GovTalkMessage xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.govtalk.gov.uk/CM/envelope envelope-v2-0-HMRC.xsd http://www.govtalk.gov.uk/taxation/PAYE/RTI/FullPaymentSubmission/16-17/2 FullPaymentSubmission-2017-v2-1.xsd' xmlns:fps='http://www.govtalk.gov.uk/taxation/PAYE/RTI/FullPaymentSubmission/16-17/2' xmlns:hd='http://www.govtalk.gov.uk/CM/envelope'>
+<hd:GovTalkMessage xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.govtalk.gov.uk/CM/envelope envelope-v2-0-HMRC.xsd http://www.govtalk.gov.uk/taxation/PAYE/RTI/FullPaymentSubmission/17-18/1 FullPaymentSubmission-2018-v0-1.xsd' xmlns:fps='http://www.govtalk.gov.uk/taxation/PAYE/RTI/FullPaymentSubmission/17-18/1' xmlns:hd='http://www.govtalk.gov.uk/CM/envelope'>
   <hd:EnvelopeVersion>2.0</hd:EnvelopeVersion>
   <hd:Header>
     <hd:MessageDetails>
       <hd:Class>HMRC-SAMPLE-CLASS</hd:Class>
       <hd:Qualifier>request</hd:Qualifier>
@@
           <fps:OfficeNo>123</fps:OfficeNo>
           <fps:PayeRef>Ref/001&lt;Q&gt;</fps:PayeRef>
           <fps:AORef>123PQ7654321X</fps:AORef>
           <fps:SAUTR>1234567890</fps:SAUTR>
         </fps:EmpRefs>
-        <fps:RelatedTaxYear>16-17</fps:RelatedTaxYear>
+        <fps:RelatedTaxYear>17-18</fps:RelatedTaxYear>
         <fps:Employee>
           <fps:EmployeeDetails>
             <fps:NINO>JS123456B</fps:NINO>
             <fps:Name>
               <fps:Ttl>Dr</fps:Ttl>
@@
               <fps:PayrollIdChangedIndicator>yes</fps:PayrollIdChangedIndicator>
               <fps:OldPayrollId>PYRL/001.THX-1138</fps:OldPayrollId>
             </fps:PayIdChgd>
             <fps:PaymentToANonIndividual>yes</fps:PaymentToANonIndividual>
             <fps:IrrEmp>yes</fps:IrrEmp>
-            <fps:LeavingDate>2000-12-31</fps:LeavingDate>
+            <fps:LeavingDate>2016-04-05</fps:LeavingDate>
             <fps:FiguresToDate>
               <fps:TaxablePay>13.12</fps:TaxablePay>
               <fps:TotalTax>13.12</fps:TotalTax>
               <fps:StudentLoansTD>12.00</fps:StudentLoansTD>
               <fps:BenefitsTaxedViaPayrollYTD>13.12</fps:BenefitsTaxedViaPayrollYTD>
@@
               <fps:EmpeePenContribnsNotPaidYTD>13.12</fps:EmpeePenContribnsNotPaidYTD>
             </fps:FiguresToDate>
             <fps:Payment>
               <fps:BacsHashCode>95c4c0abf2a45a0a12aa6d9e65e8a2a658109689bf1aac80f3858d1387415641</fps:BacsHashCode>
               <fps:PayFreq>W1</fps:PayFreq>
-              <fps:PmtDate>2016-04-06</fps:PmtDate>
+              <fps:PmtDate>2018-04-05</fps:PmtDate>
               <fps:LateReason>A</fps:LateReason>
               <fps:WeekNo>42</fps:WeekNo>
               <fps:PeriodsCovered>12</fps:PeriodsCovered>
               <fps:AggregatedEarnings>yes</fps:AggregatedEarnings>
               <fps:PmtAfterLeaving>yes</fps:PmtAfterLeaving>
@@
               <fps:TaxablePay>13.12</fps:TaxablePay>
               <fps:NonTaxOrNICPmt>13.12</fps:NonTaxOrNICPmt>
               <fps:DednsFromNetPay>13.12</fps:DednsFromNetPay>
               <fps:PayAfterStatDedns>13.12</fps:PayAfterStatDedns>
               <fps:BenefitsTaxedViaPayroll>13.12</fps:BenefitsTaxedViaPayroll>
+              <fps:Benefits>
+                <fps:Car>
+                  <fps:Make>Audi A3</fps:Make>
+                  <fps:CO2>X</fps:CO2>
+                  <fps:Fuel>D</fps:Fuel>
+                  <fps:ID>BD51 SMR</fps:ID>
+                  <fps:Amendment>yes</fps:Amendment>
+                  <fps:Price>1312.00</fps:Price>
+                  <fps:AvailFrom>2018-04-05</fps:AvailFrom>
+                  <fps:CashEquiv>13.12</fps:CashEquiv>
+                  <fps:AvailTo>2018-04-05</fps:AvailTo>
+                  <fps:FreeFuel>
+                    <fps:Provided>2018-04-05</fps:Provided>
+                    <fps:CashEquiv>13.12</fps:CashEquiv>
+                    <fps:Withdrawn>2018-04-05</fps:Withdrawn>
+                  </fps:FreeFuel>
+                </fps:Car>
+              </fps:Benefits>
               <fps:EmpeePenContribnsPaid>13.12</fps:EmpeePenContribnsPaid>
               <fps:ItemsSubjectToClass1NIC>13.12</fps:ItemsSubjectToClass1NIC>
               <fps:EmpeePenContribnsNotPaid>13.12</fps:EmpeePenContribnsNotPaid>
               <fps:StudentLoanRecovered>12.00</fps:StudentLoanRecovered>
               <fps:TaxDeductedOrRefunded>13.12</fps:TaxDeductedOrRefunded>
@@
             </fps:NIlettersAndValues>
           </fps:Employment>
         </fps:Employee>
         <fps:FinalSubmission>
           <fps:BecauseSchemeCeased>yes</fps:BecauseSchemeCeased>
-          <fps:DateSchemeCeased>2017-01-01</fps:DateSchemeCeased>
+          <fps:DateSchemeCeased>2018-01-01</fps:DateSchemeCeased>
           <fps:ForYear>yes</fps:ForYear>
         </fps:FinalSubmission>
       </fps:FullPaymentSubmission>
     </fps:IRenvelope>
   </hd:Body>


FullPaymentSubmission.sch-2017-v2-1-To-2018-v0-1

@@
 
 <sch:schema queryBinding='exslt' xmlns:sch='http://purl.oclc.org/dsdl/schematron'>
   <sch:title>Schematron for FullPaymentSubmission</sch:title>
   <sch:ns prefix='hd' uri='http://www.govtalk.gov.uk/CM/envelope'></sch:ns>
   <sch:ns prefix='dsig' uri='http://www.w3.org/2000/09/xmldsig#'></sch:ns>
-  <sch:ns prefix='fps' uri='http://www.govtalk.gov.uk/taxation/PAYE/RTI/FullPaymentSubmission/16-17/2'></sch:ns>
+  <sch:ns prefix='fps' uri='http://www.govtalk.gov.uk/taxation/PAYE/RTI/FullPaymentSubmission/17-18/1'></sch:ns>
   <sch:pattern>
     <sch:rule context='/hd:GovTalkMessage/hd:Body/fps:IRenvelope/fps:IRheader/fps:Keys/fps:Key'>
       <sch:assert id='a_r1004' diagnostics='errorCode.r1004 transactional.r1004 transactional.en.r1004 ' test='count(../../../../../hd:GovTalkDetails/hd:Keys/hd:Key[@Type = current()/@Type and . = current()]) &gt; 0'>Keys in the IR header must also exist in the GovTalk header with the same value</sch:assert>
     </sch:rule>
   </sch:pattern>
@@
       <sch:assert id='a_UTR.0.0' diagnostics='errorCode.UTR.0.0 transactional.UTR.0.0 transactional.en.UTR.0.0 ' test='(((11 - (((6 * substring(., 2, 1)) + (7 * substring(., 3, 1)) + (8 * substring(., 4, 1)) + (9 * substring(., 5, 1)) + (10 * substring(., 6, 1)) + (5 * substring(., 7, 1)) + (4 * substring(., 8, 1)) + (3 * substring(., 9, 1)) + (2 * substring(., 10, 1))) mod 11)) &gt; 9) and (substring(., 1, 1) = (11 - (((6 * substring(., 2, 1)) + (7 * substring(., 3, 1)) + (8 * substring(., 4, 1)) + (9 * substring(., 5, 1)) + (10 * substring(., 6, 1)) + (5 * substring(., 7, 1)) + (4 * substring(., 8, 1)) + (3 * substring(., 9, 1)) + (2 * substring(., 10, 1))) mod 11)) - 9))                 or                 (substring(., 1, 1) = (11 - (((6 * substring(., 2, 1)) + (7 * substring(., 3, 1)) + (8 * substring(., 4, 1)) + (9 * substring(., 5, 1)) + (10 * substring(., 6, 1)) + (5 * substring(., 7, 1)) + (4 * substring(., 8, 1)) + (3 * substring(., 9, 1)) + (2 * substring(., 10, 1))) mod 11)))'>Must be valid against the UTR algorithm</sch:assert>
     </sch:rule>
   </sch:pattern>
   <sch:pattern>
     <sch:rule context='/hd:GovTalkMessage/hd:Body/fps:IRenvelope/fps:FullPaymentSubmission/fps:RelatedTaxYear'>
-      <sch:assert id='a_RELATEDTAXYEAR.0' diagnostics='errorCode.RELATEDTAXYEAR.0 transactional.RELATEDTAXYEAR.0 transactional.en.RELATEDTAXYEAR.0 ' test='substring(string(2017 - 1), 3, 2) = substring(., 1, 2)           and             substring(2017, 3, 2) = substring(., 4, 2)'>Must be the appropriate tax year for the schema year. I.E. 16-17 for RTI-2017</sch:assert>
+      <sch:assert id='a_RELATEDTAXYEAR.0' diagnostics='errorCode.RELATEDTAXYEAR.0 transactional.RELATEDTAXYEAR.0 transactional.en.RELATEDTAXYEAR.0 ' test='substring(string(2018 - 1), 3, 2) = substring(., 1, 2)           and             substring(2018, 3, 2) = substring(., 4, 2)'>Must be the appropriate tax year for the schema year. I.E. 17-18 for RTI-2018</sch:assert>
       <sch:assert id='a_RELATEDTAXYEAR.2' diagnostics='errorCode.RELATEDTAXYEAR.2 transactional.RELATEDTAXYEAR.2 transactional.en.RELATEDTAXYEAR.2 ' test="(round(date:seconds(normalize-space(concat(2000 + number(substring(.,1,2)), '-04-06'))) div 86400) &lt;= round(date:seconds(normalize-space(../../fps:IRheader/fps:PeriodEnd)) div 86400))         and           (round(date:seconds(normalize-space(../../fps:IRheader/fps:PeriodEnd)) div 86400) &lt;= round(date:seconds(normalize-space(concat(2001 + number(substring(.,1,2)), '-04-05'))) div 86400))">The PeriodEnd within the IRheader must be within the same tax year as [RELATEDTAXYEAR].</sch:assert>
     </sch:rule>
   </sch:pattern>
   <sch:pattern>
     <sch:rule context='/hd:GovTalkMessage/hd:Body/fps:IRenvelope/fps:FullPaymentSubmission/fps:Employee/fps:EmployeeDetails/fps:Address/fps:ForeignCountry'>
@@
       <sch:assert id='a_INDIVIDUALSECONDEDTOWORKINUK.0' diagnostics='errorCode.INDIVIDUALSECONDEDTOWORKINUK.0 transactional.INDIVIDUALSECONDEDTOWORKINUK.0 transactional.en.INDIVIDUALSECONDEDTOWORKINUK.0 ' test='fps:Stay183DaysOrMore or fps:StayLessThan183Days or fps:InOutUK or fps:EPM6'> If [INDIVIDUALSECONDEDTOWORKINUK] is present, at least one of [INTENDTOSTAYOVER183DAYS], [INTENDTOSTAYLESSTHAN183DAYS], [INTENDTOWORKBOTHINANDOUTOFUK] or [EPM6SCHEME] should be present </sch:assert>
     </sch:rule>
   </sch:pattern>
   <sch:pattern>
     <sch:rule context='/hd:GovTalkMessage/hd:Body/fps:IRenvelope/fps:FullPaymentSubmission/fps:Employee/fps:Employment/fps:LeavingDate'>
-      <sch:assert id='a_LEAVINGDATE.0' diagnostics='errorCode.LEAVINGDATE.0 transactional.LEAVINGDATE.0 transactional.en.LEAVINGDATE.0 ' test="date:year(normalize-space(date:add(normalize-space((.)),normalize-space('-P3M5D')))) &gt;= date:year(normalize-space(date:add(normalize-space(date:date()),normalize-space('-P3M5D')))) - 6">[LEAVINGDATE] must be later than the start of the tax year (CY-6).</sch:assert>
-      <sch:assert id='a_LEAVINGDATE.1' diagnostics='errorCode.LEAVINGDATE.1 transactional.LEAVINGDATE.1 transactional.en.LEAVINGDATE.1 ' test="(round(date:seconds(normalize-space(.)) div 86400) &lt;= round(date:seconds(normalize-space(date:add(normalize-space(date:date()),normalize-space('P30D')))) div 86400))">[LEAVINGDATE] must not be later than thirty days after today</sch:assert>
+      <sch:assert id='a_LEAVINGDATE.2' diagnostics='errorCode.LEAVINGDATE.2 transactional.LEAVINGDATE.2 transactional.en.LEAVINGDATE.2 ' test="(round(date:seconds(normalize-space(.)) div 86400) &lt;= round(date:seconds(normalize-space(date:add(normalize-space(date:date()),normalize-space('P30D')))) div 86400))">[LEAVINGDATE] must not be later than thirty days after today</sch:assert>
     </sch:rule>
   </sch:pattern>
   <sch:pattern>
     <sch:rule context='/hd:GovTalkMessage/hd:Body/fps:IRenvelope/fps:FullPaymentSubmission/fps:Employee/fps:Employment/fps:Payment/fps:PmtAfterLeaving'>
       <sch:assert id='a_PAYMENTAFTERLEAVINGDATEINDICATOR.0' diagnostics='errorCode.PAYMENTAFTERLEAVINGDATEINDICATOR.0 transactional.PAYMENTAFTERLEAVINGDATEINDICATOR.0 transactional.en.PAYMENTAFTERLEAVINGDATEINDICATOR.0 ' test='../../fps:LeavingDate'>If [PAYMENTAFTERLEAVINGDATEINDICATOR] is present the following should be true: [LEAVINGDATE] is present</sch:assert>
     </sch:rule>
   </sch:pattern>
   <sch:pattern>
+    <sch:rule context='/hd:GovTalkMessage/hd:Body/fps:IRenvelope/fps:FullPaymentSubmission/fps:Employee/fps:Employment/fps:Payment/fps:Benefits/fps:Car/fps:AvailTo'>
+      <sch:assert id='a_CARAVAILABLETO.0' diagnostics='errorCode.CARAVAILABLETO.0 transactional.CARAVAILABLETO.0 transactional.en.CARAVAILABLETO.0 ' test='(round(date:seconds(normalize-space(../fps:AvailFrom)) div 86400) &lt;= round(date:seconds(normalize-space((.))) div 86400))'>[CARAVAILABLETO] must not be before [CARAVAILABLEFROM]</sch:assert>
+    </sch:rule>
+  </sch:pattern>
+  <sch:pattern>
+    <sch:rule context='/hd:GovTalkMessage/hd:Body/fps:IRenvelope/fps:FullPaymentSubmission/fps:Employee/fps:Employment/fps:Payment/fps:Benefits/fps:Car/fps:FreeFuel/fps:Withdrawn'>
+      <sch:assert id='a_FREEFUELWITHDRAWN.0' diagnostics='errorCode.FREEFUELWITHDRAWN.0 transactional.FREEFUELWITHDRAWN.0 transactional.en.FREEFUELWITHDRAWN.0 ' test='(round(date:seconds(normalize-space(../fps:Provided)) div 86400) &lt;= round(date:seconds(normalize-space((.))) div 86400))'>[FREEFUELWITHDRAWN] must not be before [FREEFUELPROVIDED]</sch:assert>
+    </sch:rule>
+  </sch:pattern>
+  <sch:pattern>
     <sch:rule context='/hd:GovTalkMessage/hd:Body/fps:IRenvelope/fps:FullPaymentSubmission/fps:Employee/fps:Employment/fps:Payment/fps:SMPYTD'>
       <sch:assert id='a_STATUTORYMATERNITYPAY.0' diagnostics='errorCode.STATUTORYMATERNITYPAY.0 transactional.STATUTORYMATERNITYPAY.0 transactional.en.STATUTORYMATERNITYPAY.0 ' test="../../../fps:EmployeeDetails/fps:Gender = 'F'">If [STATUTORYMATERNITYPAY] is present the following should be true: [GENDER] equals F</sch:assert>
     </sch:rule>
   </sch:pattern>
   <sch:pattern>
@@
     <sch:diagnostic id='transactional.INDIVIDUALSECONDEDTOWORKINUK.0'> If [INDIVIDUALSECONDEDTOWORKINUK] is present, at least one of [INTENDTOSTAYOVER183DAYS], [INTENDTOSTAYLESSTHAN183DAYS], [INTENDTOWORKBOTHINANDOUTOFUK] or [EPM6SCHEME] must be present. Please check.</sch:diagnostic>
     <sch:diagnostic id='transactional.en.INDIVIDUALSECONDEDTOWORKINUK.0' xml:lang='en'> If [INDIVIDUALSECONDEDTOWORKINUK] is present, at least one of [INTENDTOSTAYOVER183DAYS], [INTENDTOSTAYLESSTHAN183DAYS], [INTENDTOWORKBOTHINANDOUTOFUK] or [EPM6SCHEME] must be present. Please check.</sch:diagnostic>
     <sch:diagnostic id='errorCode.EEACOMMONWEALTHCITIZEN.0'>7884</sch:diagnostic>
     <sch:diagnostic id='transactional.EEACOMMONWEALTHCITIZEN.0'>If [EEACITIZEN] is selected you must also select one of [INTENDTOSTAYLESSTHAN183DAYS],[INTENDTOSTAYOVER183DAYS] or [INTENDTOWORKBOTHINANDOUTOFUK]</sch:diagnostic>
     <sch:diagnostic id='transactional.en.EEACOMMONWEALTHCITIZEN.0' xml:lang='en'>If [EEACITIZEN] is selected you must also select one of [INTENDTOSTAYLESSTHAN183DAYS],[INTENDTOSTAYOVER183DAYS] or [INTENDTOWORKBOTHINANDOUTOFUK]</sch:diagnostic>
-    <sch:diagnostic id='errorCode.LEAVINGDATE.0'>7905</sch:diagnostic>
-    <sch:diagnostic id='transactional.LEAVINGDATE.0'>The [LEAVINGDATE] must be within the last 6 previous tax years.</sch:diagnostic>
-    <sch:diagnostic id='transactional.en.LEAVINGDATE.0' xml:lang='en'>The [LEAVINGDATE] must be within the last 6 previous tax years.</sch:diagnostic>
-    <sch:diagnostic id='errorCode.LEAVINGDATE.1'>7831</sch:diagnostic>
-    <sch:diagnostic id='transactional.LEAVINGDATE.1'>The [LEAVINGDATE] cannot be a future date more than thirty days from today. Please check</sch:diagnostic>
-    <sch:diagnostic id='transactional.en.LEAVINGDATE.1' xml:lang='en'>The [LEAVINGDATE] cannot be a future date more than thirty days from today. Please check</sch:diagnostic>
+    <sch:diagnostic id='errorCode.LEAVINGDATE.2'>7831</sch:diagnostic>
+    <sch:diagnostic id='transactional.LEAVINGDATE.2'>The [LEAVINGDATE] cannot be a future date more than thirty days from today. Please check</sch:diagnostic>
+    <sch:diagnostic id='transactional.en.LEAVINGDATE.2' xml:lang='en'>The [LEAVINGDATE] cannot be a future date more than thirty days from today. Please check</sch:diagnostic>
     <sch:diagnostic id='errorCode.PAYMENTAFTERLEAVINGDATEINDICATOR.0'>7847</sch:diagnostic>
     <sch:diagnostic id='transactional.PAYMENTAFTERLEAVINGDATEINDICATOR.0'>The [PAYMENTAFTERLEAVINGDATEINDICATOR] is set. Please complete [LEAVINGDATE] </sch:diagnostic>
     <sch:diagnostic id='transactional.en.PAYMENTAFTERLEAVINGDATEINDICATOR.0' xml:lang='en'>The [PAYMENTAFTERLEAVINGDATEINDICATOR] is set. Please complete [LEAVINGDATE] </sch:diagnostic>
+    <sch:diagnostic id='errorCode.CARAVAILABLETO.0'>5000</sch:diagnostic>
+    <sch:diagnostic id='transactional.CARAVAILABLETO.0'>[CARAVAILABLETO] must not be before [CARAVAILABLEFROM]. Please check</sch:diagnostic>
+    <sch:diagnostic id='transactional.en.CARAVAILABLETO.0' xml:lang='en'>[CARAVAILABLETO] must not be before [CARAVAILABLEFROM]. Please check</sch:diagnostic>
+    <sch:diagnostic id='errorCode.FREEFUELWITHDRAWN.0'>5000</sch:diagnostic>
+    <sch:diagnostic id='transactional.FREEFUELWITHDRAWN.0'>[FREEFUELWITHDRAWN] must not be before [FREEFUELPROVIDED]. Please check</sch:diagnostic>
+    <sch:diagnostic id='transactional.en.FREEFUELWITHDRAWN.0' xml:lang='en'>[FREEFUELWITHDRAWN] must not be before [FREEFUELPROVIDED]. Please check</sch:diagnostic>
     <sch:diagnostic id='errorCode.STATUTORYMATERNITYPAY.0'>7848</sch:diagnostic>
     <sch:diagnostic id='transactional.STATUTORYMATERNITYPAY.0'>There is an entry in [STATUTORYMATERNITYPAY]. This can only be present if [GENDER] equals F. Please check</sch:diagnostic>
     <sch:diagnostic id='transactional.en.STATUTORYMATERNITYPAY.0' xml:lang='en'>There is an entry in [STATUTORYMATERNITYPAY]. This can only be present if [GENDER] equals F. Please check</sch:diagnostic>
     <sch:diagnostic id='errorCode.TRIVIALCOMMUTATIONPAYMENT.0'>7885</sch:diagnostic>
     <sch:diagnostic id='transactional.TRIVIALCOMMUTATIONPAYMENT.0'>[TRIVIALCOMMUTATIONPAYMENTTYPE] should be unique. Please check</sch:diagnostic>


EmployerPaymentSummary-2017-descriptiveSample-v1-0.xml-To-EmployerPaymentSummary-2018-descriptiveSample-v0-1.xml

@@
 <?xml version="1.0" encoding="UTF-8"?>
 
-<hd:GovTalkMessage xmlns:dsig='http://www.w3.org/2000/09/xmldsig#' xmlns:eps='http://www.govtalk.gov.uk/taxation/PAYE/RTI/EmployerPaymentSummary/16-17/1' xmlns:hd='http://www.govtalk.gov.uk/CM/envelope'>
+<hd:GovTalkMessage xmlns:dsig='http://www.w3.org/2000/09/xmldsig#' xmlns:eps='http://www.govtalk.gov.uk/taxation/PAYE/RTI/EmployerPaymentSummary/17-18/1' xmlns:hd='http://www.govtalk.gov.uk/CM/envelope'>
   <hd:EnvelopeVersion>EnvelopeVersion</hd:EnvelopeVersion>
   <hd:Header>
     <hd:MessageDetails>
       <hd:Class>Identifier to allow gateway to determine target department, queue and validation needed.</hd:Class>
       <hd:Qualifier>eGIF Class qualifier</hd:Qualifier>
@@
           <eps:NICCompensationOnSPP>Value of NIC compensation on Statutory Paternity Pay year to date</eps:NICCompensationOnSPP>
           <eps:NICCompensationOnSAP>Value of NIC compensation on Statutory Adoption Pay year to date</eps:NICCompensationOnSAP>
           <eps:NICCompensationOnShPP>Value of NIC compensation on Shared Parental Pay year to date</eps:NICCompensationOnShPP>
           <eps:CISDeductionsSuffered>Value of CIS deductions suffered year to date</eps:CISDeductionsSuffered>
         </eps:RecoverableAmountsYTD>
+<!--DESCRIPTION of following node: Apprenticeship Levy-->
+        <eps:ApprenticeshipLevy>
+          <eps:LevyDueYTD>Apprenticeship Levy due year to date</eps:LevyDueYTD>
+          <eps:TaxMonth>Tax month</eps:TaxMonth>
+          <eps:AnnualAllce>Annual Apprenticeship Levy allowance amount</eps:AnnualAllce>
+        </eps:ApprenticeshipLevy>
 <!--DESCRIPTION of following node: Account information-->
         <eps:Account>
           <eps:AccountHoldersName>Name of account holder</eps:AccountHoldersName>
           <eps:AccountNo>Account number</eps:AccountNo>
           <eps:SortCode>Branch sort code</eps:SortCode>


EmployerPaymentSummary-2017-schemaValidSample-v1-0.xml-To-EmployerPaymentSummary-2018-schemaValidSample-v0-1.xml

@@
 <?xml version="1.0" encoding="UTF-8"?>
 
-<hd:GovTalkMessage xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.govtalk.gov.uk/CM/envelope envelope-v2-0-HMRC.xsd http://www.govtalk.gov.uk/taxation/PAYE/RTI/EmployerPaymentSummary/16-17/1 EmployerPaymentSummary-2017-v1-0.xsd' xmlns:eps='http://www.govtalk.gov.uk/taxation/PAYE/RTI/EmployerPaymentSummary/16-17/1' xmlns:hd='http://www.govtalk.gov.uk/CM/envelope'>
+<hd:GovTalkMessage xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.govtalk.gov.uk/CM/envelope envelope-v2-0-HMRC.xsd http://www.govtalk.gov.uk/taxation/PAYE/RTI/EmployerPaymentSummary/17-18/1 EmployerPaymentSummary-2018-v0-1.xsd' xmlns:eps='http://www.govtalk.gov.uk/taxation/PAYE/RTI/EmployerPaymentSummary/17-18/1' xmlns:hd='http://www.govtalk.gov.uk/CM/envelope'>
   <hd:EnvelopeVersion>2.0</hd:EnvelopeVersion>
   <hd:Header>
     <hd:MessageDetails>
       <hd:Class>HMRC-SAMPLE-CLASS</hd:Class>
       <hd:Qualifier>request</hd:Qualifier>
@@
           <eps:PayeRef>Ref/001&lt;Q&gt;</eps:PayeRef>
           <eps:AORef>123PQ7654321X</eps:AORef>
         </eps:EmpRefs>
         <eps:NoPaymentForPeriod>yes</eps:NoPaymentForPeriod>
         <eps:NoPaymentDates>
-          <eps:From>2016-04-06</eps:From>
-          <eps:To>2017-04-05</eps:To>
+          <eps:From>2017-04-06</eps:From>
+          <eps:To>2018-04-05</eps:To>
         </eps:NoPaymentDates>
         <eps:PeriodOfInactivity>
           <eps:From>2015-04-06</eps:From>
           <eps:To>2015-05-05</eps:To>
         </eps:PeriodOfInactivity>
@@
           <eps:NICCompensationOnSPP>13.12</eps:NICCompensationOnSPP>
           <eps:NICCompensationOnSAP>13.12</eps:NICCompensationOnSAP>
           <eps:NICCompensationOnShPP>13.12</eps:NICCompensationOnShPP>
           <eps:CISDeductionsSuffered>13.12</eps:CISDeductionsSuffered>
         </eps:RecoverableAmountsYTD>
+        <eps:ApprenticeshipLevy>
+          <eps:LevyDueYTD>12.00</eps:LevyDueYTD>
+          <eps:TaxMonth>12</eps:TaxMonth>
+          <eps:AnnualAllce>13.12</eps:AnnualAllce>
+        </eps:ApprenticeshipLevy>
         <eps:Account>
           <eps:AccountHoldersName>Mr. James T Bacon</eps:AccountHoldersName>
           <eps:AccountNo>12345678</eps:AccountNo>
           <eps:SortCode>123456</eps:SortCode>
           <eps:BuildingSocRef>SMITH-(123)</eps:BuildingSocRef>
         </eps:Account>
-        <eps:RelatedTaxYear>16-17</eps:RelatedTaxYear>
+        <eps:RelatedTaxYear>17-18</eps:RelatedTaxYear>
         <eps:FinalSubmission>
           <eps:BecauseSchemeCeased>yes</eps:BecauseSchemeCeased>
-          <eps:DateSchemeCeased>2017-01-01</eps:DateSchemeCeased>
+          <eps:DateSchemeCeased>2018-01-01</eps:DateSchemeCeased>
           <eps:ForYear>yes</eps:ForYear>
         </eps:FinalSubmission>
       </eps:EmployerPaymentSummary>
     </eps:IRenvelope>
   </hd:Body>


EmployerPaymentSummary.sch-2017-v1-0-To-2018-v0-1

@@
 
 <sch:schema queryBinding='exslt' xmlns:sch='http://purl.oclc.org/dsdl/schematron'>
   <sch:title>Schematron for EmployerPaymentSummary</sch:title>
   <sch:ns prefix='hd' uri='http://www.govtalk.gov.uk/CM/envelope'></sch:ns>
   <sch:ns prefix='dsig' uri='http://www.w3.org/2000/09/xmldsig#'></sch:ns>
-  <sch:ns prefix='eps' uri='http://www.govtalk.gov.uk/taxation/PAYE/RTI/EmployerPaymentSummary/16-17/1'></sch:ns>
+  <sch:ns prefix='eps' uri='http://www.govtalk.gov.uk/taxation/PAYE/RTI/EmployerPaymentSummary/17-18/1'></sch:ns>
   <sch:pattern>
     <sch:rule context='/hd:GovTalkMessage/hd:Body/eps:IRenvelope/eps:IRheader/eps:Keys/eps:Key'>
       <sch:assert id='a_r1004' diagnostics='errorCode.r1004 transactional.r1004 transactional.en.r1004 ' test='count(../../../../../hd:GovTalkDetails/hd:Keys/hd:Key[@Type = current()/@Type and . = current()]) &gt; 0'>Keys in the IR header must also exist in the GovTalk header with the same value</sch:assert>
     </sch:rule>
   </sch:pattern>
@@
       <sch:assert id='a_PERIODOFINACTIVITY.0' diagnostics='errorCode.PERIODOFINACTIVITY.0 transactional.PERIODOFINACTIVITY.0 transactional.en.PERIODOFINACTIVITY.0 ' test="(round(date:seconds(normalize-space(eps:To)) div 86400) &lt;= round(date:seconds(normalize-space(date:add(normalize-space(eps:From),normalize-space('P12M')))) div 86400))">[PERIODOFINACTIVITY] must be less than or equal to 12 months.</sch:assert>
     </sch:rule>
   </sch:pattern>
   <sch:pattern>
     <sch:rule context='/hd:GovTalkMessage/hd:Body/eps:IRenvelope/eps:EmployerPaymentSummary/eps:RecoverableAmountsYTD/eps:TaxMonth'>
-      <sch:assert id='a_TAXMONTH.1' diagnostics='errorCode.TAXMONTH.1 transactional.TAXMONTH.1 transactional.en.TAXMONTH.1 ' test="not('1' = (.))               or             (               (round(date:seconds(normalize-space(concat(2017 - 1, '-03-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2017 - 1, '-05-19'))) div 86400))             )">A [TAXMONTH] equal to 1 is only valid if the submission is made between 6 March of the tax year before [RELATEDTAXYEAR] and 19 May of [RELATEDTAXYEAR] inclusive.</sch:assert>
-      <sch:assert id='a_TAXMONTH.2' diagnostics='errorCode.TAXMONTH.2 transactional.TAXMONTH.2 transactional.en.TAXMONTH.2 ' test="not('2' = (.))               or             (               (round(date:seconds(normalize-space(concat(2017 - 1, '-04-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2017 - 1, '-06-19'))) div 86400))             )">A [TAXMONTH] equal to 2 is only valid if the submission is made between 6 April and 19 June of [RELATEDTAXYEAR] inclusive.</sch:assert>
-      <sch:assert id='a_TAXMONTH.3' diagnostics='errorCode.TAXMONTH.3 transactional.TAXMONTH.3 transactional.en.TAXMONTH.3 ' test="not('3' = (.))               or             (               (round(date:seconds(normalize-space(concat(2017 - 1, '-05-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2017 - 1, '-07-19'))) div 86400))             )">A [TAXMONTH] equal to 3 is only valid if the submission is made between 6 May and 19 July of [RELATEDTAXYEAR] inclusive.</sch:assert>
-      <sch:assert id='a_TAXMONTH.4' diagnostics='errorCode.TAXMONTH.4 transactional.TAXMONTH.4 transactional.en.TAXMONTH.4 ' test="not('4' = (.))               or             (               (round(date:seconds(normalize-space(concat(2017 - 1, '-06-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2017 - 1, '-08-19'))) div 86400))             )">A [TAXMONTH] equal to 4 is only valid if the submission is made between 6 June and 19 August of [RELATEDTAXYEAR] inclusive.</sch:assert>
-      <sch:assert id='a_TAXMONTH.5' diagnostics='errorCode.TAXMONTH.5 transactional.TAXMONTH.5 transactional.en.TAXMONTH.5 ' test="not('5' = (.))               or             (               (round(date:seconds(normalize-space(concat(2017 - 1, '-07-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2017 - 1, '-09-19'))) div 86400))             )">A [TAXMONTH] equal to 5 is only valid if the submission is made between 6 July and 19 September of [RELATEDTAXYEAR] inclusive.</sch:assert>
-      <sch:assert id='a_TAXMONTH.6' diagnostics='errorCode.TAXMONTH.6 transactional.TAXMONTH.6 transactional.en.TAXMONTH.6 ' test="not('6' = (.))               or             (               (round(date:seconds(normalize-space(concat(2017 - 1, '-08-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2017 - 1, '-10-19'))) div 86400))             )">A [TAXMONTH] equal to 6 is only valid if the submission is made between 6 August and 19 October of [RELATEDTAXYEAR] inclusive.</sch:assert>
-      <sch:assert id='a_TAXMONTH.7' diagnostics='errorCode.TAXMONTH.7 transactional.TAXMONTH.7 transactional.en.TAXMONTH.7 ' test="not('7' = (.))               or             (               (round(date:seconds(normalize-space(concat(2017 - 1, '-09-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2017 - 1, '-11-19'))) div 86400))             )">A [TAXMONTH] equal to 7 is only valid if the submission is made between 6 September and 19 November of [RELATEDTAXYEAR] inclusive.</sch:assert>
-      <sch:assert id='a_TAXMONTH.8' diagnostics='errorCode.TAXMONTH.8 transactional.TAXMONTH.8 transactional.en.TAXMONTH.8 ' test="not('8' = (.))               or             (               (round(date:seconds(normalize-space(concat(2017 - 1, '-10-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2017 - 1, '-12-19'))) div 86400))             )">A [TAXMONTH] equal to 8 is only valid if the submission is made between 6 October and 19 December of [RELATEDTAXYEAR] inclusive.</sch:assert>
-      <sch:assert id='a_TAXMONTH.9' diagnostics='errorCode.TAXMONTH.9 transactional.TAXMONTH.9 transactional.en.TAXMONTH.9 ' test="not('9' = (.))               or             (               (round(date:seconds(normalize-space(concat(2017 - 1, '-11-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2017, '-01-19'))) div 86400))             )">A [TAXMONTH] equal to 9 is only valid if the submission is made between 6 November and 19 January of [RELATEDTAXYEAR] inclusive.</sch:assert>
-      <sch:assert id='a_TAXMONTH.10' diagnostics='errorCode.TAXMONTH.10 transactional.TAXMONTH.10 transactional.en.TAXMONTH.10 ' test="not('10' = (.))               or             (               (round(date:seconds(normalize-space(concat(2017 - 1, '-12-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2017, '-02-19'))) div 86400))             )">A [TAXMONTH] equal to 10 is only valid if the submission is made between 6 December and 19 February of [RELATEDTAXYEAR] inclusive.</sch:assert>
-      <sch:assert id='a_TAXMONTH.11' diagnostics='errorCode.TAXMONTH.11 transactional.TAXMONTH.11 transactional.en.TAXMONTH.11 ' test="not('11' = (.))               or             (               (round(date:seconds(normalize-space(concat(2017, '-01-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2017, '-03-19'))) div 86400))             )">A [TAXMONTH] equal to 11 is only valid if the submission is made between 6 January and 19 March of [RELATEDTAXYEAR] inclusive.</sch:assert>
-      <sch:assert id='a_TAXMONTH.12' diagnostics='errorCode.TAXMONTH.12 transactional.TAXMONTH.12 transactional.en.TAXMONTH.12 ' test="not('12' = (.))               or             (round(date:seconds(normalize-space(concat(2017, '-02-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))">A [TAXMONTH] equal to 12 is only valid if the submission is made on or after 6 February of [RELATEDTAXYEAR].</sch:assert>
+      <sch:assert id='a_TAXMONTH.1' diagnostics='errorCode.TAXMONTH.1 transactional.TAXMONTH.1 transactional.en.TAXMONTH.1 ' test="not('1' = (.))               or             (               (round(date:seconds(normalize-space(concat(2018 - 1, '-03-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2018 - 1, '-05-19'))) div 86400))             )">A [TAXMONTH] equal to 1 is only valid if the submission is made between 6 March of the tax year before [RELATEDTAXYEAR] and 19 May of [RELATEDTAXYEAR] inclusive.</sch:assert>
+      <sch:assert id='a_TAXMONTH.2' diagnostics='errorCode.TAXMONTH.2 transactional.TAXMONTH.2 transactional.en.TAXMONTH.2 ' test="not('2' = (.))               or             (               (round(date:seconds(normalize-space(concat(2018 - 1, '-04-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2018 - 1, '-06-19'))) div 86400))             )">A [TAXMONTH] equal to 2 is only valid if the submission is made between 6 April and 19 June of [RELATEDTAXYEAR] inclusive.</sch:assert>
+      <sch:assert id='a_TAXMONTH.3' diagnostics='errorCode.TAXMONTH.3 transactional.TAXMONTH.3 transactional.en.TAXMONTH.3 ' test="not('3' = (.))               or             (               (round(date:seconds(normalize-space(concat(2018 - 1, '-05-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2018 - 1, '-07-19'))) div 86400))             )">A [TAXMONTH] equal to 3 is only valid if the submission is made between 6 May and 19 July of [RELATEDTAXYEAR] inclusive.</sch:assert>
+      <sch:assert id='a_TAXMONTH.4' diagnostics='errorCode.TAXMONTH.4 transactional.TAXMONTH.4 transactional.en.TAXMONTH.4 ' test="not('4' = (.))               or             (               (round(date:seconds(normalize-space(concat(2018 - 1, '-06-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2018 - 1, '-08-19'))) div 86400))             )">A [TAXMONTH] equal to 4 is only valid if the submission is made between 6 June and 19 August of [RELATEDTAXYEAR] inclusive.</sch:assert>
+      <sch:assert id='a_TAXMONTH.5' diagnostics='errorCode.TAXMONTH.5 transactional.TAXMONTH.5 transactional.en.TAXMONTH.5 ' test="not('5' = (.))               or             (               (round(date:seconds(normalize-space(concat(2018 - 1, '-07-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2018 - 1, '-09-19'))) div 86400))             )">A [TAXMONTH] equal to 5 is only valid if the submission is made between 6 July and 19 September of [RELATEDTAXYEAR] inclusive.</sch:assert>
+      <sch:assert id='a_TAXMONTH.6' diagnostics='errorCode.TAXMONTH.6 transactional.TAXMONTH.6 transactional.en.TAXMONTH.6 ' test="not('6' = (.))               or             (               (round(date:seconds(normalize-space(concat(2018 - 1, '-08-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2018 - 1, '-10-19'))) div 86400))             )">A [TAXMONTH] equal to 6 is only valid if the submission is made between 6 August and 19 October of [RELATEDTAXYEAR] inclusive.</sch:assert>
+      <sch:assert id='a_TAXMONTH.7' diagnostics='errorCode.TAXMONTH.7 transactional.TAXMONTH.7 transactional.en.TAXMONTH.7 ' test="not('7' = (.))               or             (               (round(date:seconds(normalize-space(concat(2018 - 1, '-09-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2018 - 1, '-11-19'))) div 86400))             )">A [TAXMONTH] equal to 7 is only valid if the submission is made between 6 September and 19 November of [RELATEDTAXYEAR] inclusive.</sch:assert>
+      <sch:assert id='a_TAXMONTH.8' diagnostics='errorCode.TAXMONTH.8 transactional.TAXMONTH.8 transactional.en.TAXMONTH.8 ' test="not('8' = (.))               or             (               (round(date:seconds(normalize-space(concat(2018 - 1, '-10-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2018 - 1, '-12-19'))) div 86400))             )">A [TAXMONTH] equal to 8 is only valid if the submission is made between 6 October and 19 December of [RELATEDTAXYEAR] inclusive.</sch:assert>
+      <sch:assert id='a_TAXMONTH.9' diagnostics='errorCode.TAXMONTH.9 transactional.TAXMONTH.9 transactional.en.TAXMONTH.9 ' test="not('9' = (.))               or             (               (round(date:seconds(normalize-space(concat(2018 - 1, '-11-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2018, '-01-19'))) div 86400))             )">A [TAXMONTH] equal to 9 is only valid if the submission is made between 6 November and 19 January of [RELATEDTAXYEAR] inclusive.</sch:assert>
+      <sch:assert id='a_TAXMONTH.10' diagnostics='errorCode.TAXMONTH.10 transactional.TAXMONTH.10 transactional.en.TAXMONTH.10 ' test="not('10' = (.))               or             (               (round(date:seconds(normalize-space(concat(2018 - 1, '-12-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2018, '-02-19'))) div 86400))             )">A [TAXMONTH] equal to 10 is only valid if the submission is made between 6 December and 19 February of [RELATEDTAXYEAR] inclusive.</sch:assert>
+      <sch:assert id='a_TAXMONTH.11' diagnostics='errorCode.TAXMONTH.11 transactional.TAXMONTH.11 transactional.en.TAXMONTH.11 ' test="not('11' = (.))               or             (               (round(date:seconds(normalize-space(concat(2018, '-01-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))                 and               (round(date:seconds(normalize-space(date:date())) div 86400) &lt;= round(date:seconds(normalize-space(concat(2018, '-03-19'))) div 86400))             )">A [TAXMONTH] equal to 11 is only valid if the submission is made between 6 January and 19 March of [RELATEDTAXYEAR] inclusive.</sch:assert>
+      <sch:assert id='a_TAXMONTH.12' diagnostics='errorCode.TAXMONTH.12 transactional.TAXMONTH.12 transactional.en.TAXMONTH.12 ' test="not('12' = (.))               or             (round(date:seconds(normalize-space(concat(2018, '-02-06'))) div 86400) &lt;= round(date:seconds(normalize-space(date:date())) div 86400))">A [TAXMONTH] equal to 12 is only valid if the submission is made on or after 6 February of [RELATEDTAXYEAR].</sch:assert>
     </sch:rule>
   </sch:pattern>
   <sch:pattern>
     <sch:rule context='/hd:GovTalkMessage/hd:Body/eps:IRenvelope/eps:EmployerPaymentSummary/eps:RecoverableAmountsYTD'>
       <sch:assert id='a_PAYMENTFORPERIOD.0' diagnostics='errorCode.PAYMENTFORPERIOD.0 transactional.PAYMENTFORPERIOD.0 transactional.en.PAYMENTFORPERIOD.0 ' test='eps:SMPRecovered or            eps:SPPRecovered or            eps:SAPRecovered or            eps:ShPPRecovered or            eps:NICCompensationOnSMP or            eps:NICCompensationOnSPP or            eps:NICCompensationOnSAP or            eps:NICCompensationOnShPP or            eps:CISDeductionsSuffered'>If [RECOVERABLEAMOUNTSYEARTODATE] is present, at least one of [SMPRECOVERED] or [SPPRECOVERED] or [SAPRECOVERED] or [SHPPRECOVERED] or [NICCOMPENSATIONONSMP] or [NICCOMPENSATIONONSPP] or [NICCOMPENSATIONONSAP] or [NICCOMPENSATIONONSHPP] or [CISDEDUCTIONSSUFFERED] must be present.</sch:assert>
     </sch:rule>
   </sch:pattern>
   <sch:pattern>
     <sch:rule context='/hd:GovTalkMessage/hd:Body/eps:IRenvelope/eps:EmployerPaymentSummary/eps:RelatedTaxYear'>
-      <sch:assert id='a_RELATEDTAXYEAR.0' diagnostics='errorCode.RELATEDTAXYEAR.0 transactional.RELATEDTAXYEAR.0 transactional.en.RELATEDTAXYEAR.0 ' test='substring(string(2017 - 1), 3, 2) = substring(., 1, 2)           and             substring(2017, 3, 2) = substring(., 4, 2)'>Must be the appropriate tax year for the schema year. I.E. 16-17 for RTI-2017</sch:assert>
+      <sch:assert id='a_RELATEDTAXYEAR.0' diagnostics='errorCode.RELATEDTAXYEAR.0 transactional.RELATEDTAXYEAR.0 transactional.en.RELATEDTAXYEAR.0 ' test='substring(string(2018 - 1), 3, 2) = substring(., 1, 2)           and             substring(2018, 3, 2) = substring(., 4, 2)'>Must be the appropriate tax year for the schema year. I.E. 17-18 for RTI-2018</sch:assert>
       <sch:assert id='a_RELATEDTAXYEAR.2' diagnostics='errorCode.RELATEDTAXYEAR.2 transactional.RELATEDTAXYEAR.2 transactional.en.RELATEDTAXYEAR.2 ' test="(round(date:seconds(normalize-space(concat(2000 + number(substring(.,1,2)), '-04-06'))) div 86400) &lt;= round(date:seconds(normalize-space(../../eps:IRheader/eps:PeriodEnd)) div 86400))         and           (round(date:seconds(normalize-space(../../eps:IRheader/eps:PeriodEnd)) div 86400) &lt;= round(date:seconds(normalize-space(concat(2001 + number(substring(.,1,2)), '-04-05'))) div 86400))">The PeriodEnd within the IRheader must be within the same tax year as [RELATEDTAXYEAR].</sch:assert>
     </sch:rule>
   </sch:pattern>
   <sch:pattern>
     <sch:rule context='/hd:GovTalkMessage/hd:Body/eps:IRenvelope/eps:EmployerPaymentSummary/eps:FinalSubmission/eps:BecauseSchemeCeased'>
@@
     </sch:rule>
   </sch:pattern>
   <sch:pattern>
     <sch:rule context='/hd:GovTalkMessage/hd:Body/eps:IRenvelope/eps:EmployerPaymentSummary'>
       <sch:assert id='a_EPS.1' diagnostics='errorCode.EPS.1 transactional.EPS.1 transactional.en.EPS.1 ' test="../../../hd:Header/hd:MessageDetails/hd:Class = 'HMRC-PAYE-RTI-EPS'           or           ../../../hd:Header/hd:MessageDetails/hd:Class = 'HMRC-PAYE-RTI-EPS-TIL'">Valid message classes for an Employer Payment Summary are HMRC-PAYE-RTI-EPS and HMRC-PAYE-RTI-EPS-TIL.</sch:assert>
-      <sch:assert id='a_EPS.0' diagnostics='errorCode.EPS.0 transactional.EPS.0 transactional.en.EPS.0 ' test='eps:NoPaymentForPeriod or eps:PeriodOfInactivity or eps:EmpAllceInd or eps:RecoverableAmountsYTD or eps:Account or eps:FinalSubmission'>At least one of [NOPAYMENTFORPERIOD], [PERIODOFINACTIVITY], [EMPLOYMENTALLOWANCEINDICATOR], [RECOVERABLEAMOUNTSYEARTODATE], [ACCOUNTINFORMATION] or [FINALSUBMISSION] must be submitted.</sch:assert>
+      <sch:assert id='a_EPS.0' diagnostics='errorCode.EPS.0 transactional.EPS.0 transactional.en.EPS.0 ' test='eps:NoPaymentForPeriod or eps:PeriodOfInactivity or eps:EmpAllceInd or eps:RecoverableAmountsYTD or eps:ApprenticeshipLevy or eps:Account or eps:FinalSubmission'>At least one of [NOPAYMENTFORPERIOD], [PERIODOFINACTIVITY], [EMPLOYMENTALLOWANCEINDICATOR], [RECOVERABLEAMOUNTSYEARTODATE], [APPRENTICESHIPLEVY], [ACCOUNTINFORMATION] or [FINALSUBMISSION] must be submitted.</sch:assert>
     </sch:rule>
   </sch:pattern>
   <sch:diagnostics>
     <sch:diagnostic id='errorCode.r1005'>5004</sch:diagnostic>
     <sch:diagnostic id='transactional.r1005'>At least one key must exist in the IRheader</sch:diagnostic>
@@
     <sch:diagnostic id='transactional.en.r1004' xml:lang='en'>Keys in the GovTalkDetails do not match those in the IRheader.</sch:diagnostic>
     <sch:diagnostic id='errorCode.EPS.1'>7838</sch:diagnostic>
     <sch:diagnostic id='transactional.EPS.1'>Valid message classes for an Employer Payment Summary are HMRC-PAYE-RTI-EPS and HMRC-PAYE-RTI-EPS-TIL.</sch:diagnostic>
     <sch:diagnostic id='transactional.en.EPS.1' xml:lang='en'>Valid message classes for an Employer Payment Summary are HMRC-PAYE-RTI-EPS and HMRC-PAYE-RTI-EPS-TIL.</sch:diagnostic>
     <sch:diagnostic id='errorCode.EPS.0'>7913</sch:diagnostic>
-    <sch:diagnostic id='transactional.EPS.0'>On an Employer Payment Submission there must be an entry in at least one of [NOPAYMENTFORPERIOD], [PERIODOFINACTIVITY], [EMPLOYMENTALLOWANCEINDICATOR], [RECOVERABLEAMOUNTSYEARTODATE], [ACCOUNTINFORMATION] or [FINALSUBMISSION]. Please check.</sch:diagnostic>
-    <sch:diagnostic id='transactional.en.EPS.0' xml:lang='en'>On an Employer Payment Submission there must be an entry in at least one of [NOPAYMENTFORPERIOD], [PERIODOFINACTIVITY], [EMPLOYMENTALLOWANCEINDICATOR], [RECOVERABLEAMOUNTSYEARTODATE], [ACCOUNTINFORMATION] or [FINALSUBMISSION]. Please check.</sch:diagnostic>
+    <sch:diagnostic id='transactional.EPS.0'>On an Employer Payment Submission there must be an entry in at least one of [NOPAYMENTFORPERIOD], [PERIODOFINACTIVITY], [EMPLOYMENTALLOWANCEINDICATOR], [RECOVERABLEAMOUNTSYEARTODATE], [APPRENTICESHIPLEVY], [ACCOUNTINFORMATION] or [FINALSUBMISSION]. Please check.</sch:diagnostic>
+    <sch:diagnostic id='transactional.en.EPS.0' xml:lang='en'>On an Employer Payment Submission there must be an entry in at least one of [NOPAYMENTFORPERIOD], [PERIODOFINACTIVITY], [EMPLOYMENTALLOWANCEINDICATOR], [RECOVERABLEAMOUNTSYEARTODATE], [APPRENTICESHIPLEVY], [ACCOUNTINFORMATION] or [FINALSUBMISSION]. Please check.</sch:diagnostic>
     <sch:diagnostic id='errorCode.HMRCOFFICENUMBER.0'>7821</sch:diagnostic>
     <sch:diagnostic id='transactional.HMRCOFFICENUMBER.0'>The TaxOfficeNumber key within the IRheader must match [HMRCOFFICENUMBER]</sch:diagnostic>
     <sch:diagnostic id='transactional.en.HMRCOFFICENUMBER.0' xml:lang='en'>The TaxOfficeNumber key within the IRheader must match [HMRCOFFICENUMBER]</sch:diagnostic>
     <sch:diagnostic id='errorCode.EMPLOYERPAYEREF.0'>7822</sch:diagnostic>
     <sch:diagnostic id='transactional.EMPLOYERPAYEREF.0'>The TaxOfficeReference key within the IRheader must match [EMPLOYERPAYEREF]</sch:diagnostic>


NINOverificationRequest-descriptiveSample.xml-v1-1-To-v1-1



NINOverificationRequest-schemaValidSample.xml-v1-1-To-v1-1



NINOverificationRequest.sch-v1-1-To-v1-1



envelope.xsd-v2-0-To-v2-0

@@
     <xsd:documentation>This schema is used as the envelope for all GovTalk messages.  It is described in detail in a separate document on the GovTalk web site.</xsd:documentation>
     <xsd:appinfo>
       <gt:KeyWords xmlns:gt='http://www.govtalk.gov.uk/CM/core'>GovTalk, header, envelope</gt:KeyWords>
       <gms:Metadata xmlns:gms='http://www.govtalk.gov.uk/CM/gms-xs'>
         <gms:Date>
-          <gms:Modified>2015-11-02</gms:Modified>
+          <gms:Modified>2016-07-12</gms:Modified>
         </gms:Date>
         <gms:Relation>
           <gms:Requires>xmldsig-core-schema.xsd</gms:Requires>
         </gms:Relation>
         <gms:Relation>


EmployerAlignmentSubmission.xsd-v3-2-To-v3-2

@@
         <gms:Creator>HMRC</gms:Creator>
         <gms:Date>
           <gms:Created>2011-03-18</gms:Created>
         </gms:Date>
         <gms:Date>
-          <gms:Modified>2015-11-02</gms:Modified>
+          <gms:Modified>2016-07-12</gms:Modified>
         </gms:Date>
         <gms:Language>[ISO 639-2/B] ENG</gms:Language>
         <gms:Publisher>HMRC</gms:Publisher>
         <gms:Relation>
           <gms:ProvidesDefinitionOf>IRenvelope</gms:ProvidesDefinitionOf>


FullPaymentSubmission.xsd-2017-v2-1-To-2018-v0-1

@@
 <?xml version="1.0" encoding="UTF-8"?>
 
-<xsd:schema version='2.1' elementFormDefault='qualified' attributeFormDefault='unqualified' id='FullPaymentSubmission' targetNamespace='http://www.govtalk.gov.uk/taxation/PAYE/RTI/FullPaymentSubmission/16-17/2' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:fps='http://www.govtalk.gov.uk/taxation/PAYE/RTI/FullPaymentSubmission/16-17/2'>
+<xsd:schema version='0.1' elementFormDefault='qualified' attributeFormDefault='unqualified' id='FullPaymentSubmission' targetNamespace='http://www.govtalk.gov.uk/taxation/PAYE/RTI/FullPaymentSubmission/17-18/1' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:fps='http://www.govtalk.gov.uk/taxation/PAYE/RTI/FullPaymentSubmission/17-18/1'>
   <xsd:annotation>
     <xsd:appinfo>
       <gms:Metadata xmlns:gms='http://www.govtalk.gov.uk/CM/gms-xs'>
         <gms:Audience>e-service developers</gms:Audience>
         <gms:Contributor>CoreFiling Ltd</gms:Contributor>
         <gms:Creator>HMRC</gms:Creator>
         <gms:Date>
-          <gms:Created>2015-06-19</gms:Created>
+          <gms:Created>2016-07-12</gms:Created>
         </gms:Date>
         <gms:Date>
-          <gms:Modified>2015-11-02</gms:Modified>
+          <gms:Modified>2016-07-12</gms:Modified>
         </gms:Date>
         <gms:Language>[ISO 639-2/B] ENG</gms:Language>
         <gms:Publisher>HMRC</gms:Publisher>
         <gms:Relation>
           <gms:ProvidesDefinitionOf>IRenvelope</gms:ProvidesDefinitionOf>
@@
         </gms:Relation>
         <gms:Relation>
           <gms:ProvidesDefinitionOf>FullPaymentSubmission_IRmonetaryType</gms:ProvidesDefinitionOf>
         </gms:Relation>
         <gms:Relation>
+          <gms:ProvidesDefinitionOf>FullPaymentSubmission_IRnonNegativeMax999IntegerType</gms:ProvidesDefinitionOf>
+        </gms:Relation>
+        <gms:Relation>
           <gms:ProvidesDefinitionOf>FullPaymentSubmission_IRnonNegativeMonetaryType</gms:ProvidesDefinitionOf>
         </gms:Relation>
         <gms:Relation>
           <gms:ProvidesDefinitionOf>FullPaymentSubmission_IRwholeUnitsMonetaryType</gms:ProvidesDefinitionOf>
         </gms:Relation>
@@
         </gms:Relation>
         <gms:Relation>
           <gms:ProvidesDefinitionOf>FullPaymentSubmission_WorkHomeType</gms:ProvidesDefinitionOf>
         </gms:Relation>
         <gms:Relation>
+          <gms:ProvidesDefinitionOf>FullPaymentSubmission_XType</gms:ProvidesDefinitionOf>
+        </gms:Relation>
+        <gms:Relation>
           <gms:ProvidesDefinitionOf>FullPaymentSubmission_YesNoType</gms:ProvidesDefinitionOf>
         </gms:Relation>
         <gms:Relation>
           <gms:ProvidesDefinitionOf>FullPaymentSubmission_YesType</gms:ProvidesDefinitionOf>
         </gms:Relation>
         <gms:Rights>
-          <gms:Copyright>(C) Crown Copyright 2013-2015</gms:Copyright>
+          <gms:Copyright>(C) Crown Copyright 2013-2016</gms:Copyright>
         </gms:Rights>
         <gms:Subject>
           <gms:Category>Economics, Finance and Tax</gms:Category>
         </gms:Subject>
-        <gms:Title>PAYE RTI Full Payment Submission 2016-17 schema</gms:Title>
+        <gms:Title>PAYE RTI Full Payment Submission 2017-18 schema</gms:Title>
         <gms:Type>message</gms:Type>
       </gms:Metadata>
     </xsd:appinfo>
   </xsd:annotation>
   <xsd:element name='IRenvelope'>
@@
                       </xsd:element>
                       <xsd:element name='PaymentToANonIndividual' type='fps:FullPaymentSubmission_YesType' minOccurs='0' maxOccurs='1'></xsd:element>
                       <xsd:element name='IrrEmp' type='fps:FullPaymentSubmission_YesType' minOccurs='0' maxOccurs='1'></xsd:element>
                       <xsd:element name='LeavingDate' minOccurs='0' maxOccurs='1'>
                         <xsd:simpleType>
-                          <xsd:restriction base='fps:FullPaymentSubmission_DateType'></xsd:restriction>
+                          <xsd:restriction base='fps:FullPaymentSubmission_DateType'>
+                            <xsd:minInclusive value='2011-04-06'></xsd:minInclusive>
+                          </xsd:restriction>
                         </xsd:simpleType>
                       </xsd:element>
                       <xsd:element name='FiguresToDate' minOccurs='1' maxOccurs='1'>
                         <xsd:complexType>
                           <xsd:sequence>
@@
                               </xsd:simpleType>
                             </xsd:element>
                             <xsd:element name='PmtDate' minOccurs='1' maxOccurs='1'>
                               <xsd:simpleType>
                                 <xsd:restriction base='fps:FullPaymentSubmission_DateType'>
-                                  <xsd:maxInclusive value='2017-04-05'></xsd:maxInclusive>
-                                  <xsd:minInclusive value='2016-04-06'></xsd:minInclusive>
+                                  <xsd:maxInclusive value='2018-04-05'></xsd:maxInclusive>
+                                  <xsd:minInclusive value='2017-04-06'></xsd:minInclusive>
                                 </xsd:restriction>
                               </xsd:simpleType>
                             </xsd:element>
                             <xsd:element name='LateReason' minOccurs='0' maxOccurs='1'>
                               <xsd:simpleType>
@@
                             </xsd:element>
                             <xsd:element name='TaxCode' minOccurs='1' maxOccurs='1'>
                               <xsd:complexType>
                                 <xsd:simpleContent>
                                   <xsd:extension base='fps:_intermediate_TaxCode2015'>
+                                    <xsd:attribute name='BasisNonCumulative' type='fps:FullPaymentSubmission_YesType' use='optional'></xsd:attribute>
                                     <xsd:attribute name='TaxRegime' use='optional'>
                                       <xsd:simpleType>
                                         <xsd:restriction base='xsd:string'>
                                           <xsd:enumeration value='S'></xsd:enumeration>
                                         </xsd:restriction>
                                       </xsd:simpleType>
                                     </xsd:attribute>
-                                    <xsd:attribute name='BasisNonCumulative' type='fps:FullPaymentSubmission_YesType' use='optional'></xsd:attribute>
                                   </xsd:extension>
                                 </xsd:simpleContent>
                               </xsd:complexType>
                             </xsd:element>
                             <xsd:element name='TaxablePay' minOccurs='1' maxOccurs='1'>
@@
                                   <xsd:maxInclusive value='999999999.99'></xsd:maxInclusive>
                                   <xsd:minInclusive value='-999999999.99'></xsd:minInclusive>
                                 </xsd:restriction>
                               </xsd:simpleType>
                             </xsd:element>
+                            <xsd:element name='Benefits' minOccurs='0' maxOccurs='1'>
+                              <xsd:complexType>
+                                <xsd:sequence>
+                                  <xsd:element name='Car' minOccurs='1' maxOccurs='15'>
+                                    <xsd:complexType>
+                                      <xsd:sequence>
+                                        <xsd:element name='Make' minOccurs='1' maxOccurs='1'>
+                                          <xsd:simpleType>
+                                            <xsd:restriction base='xsd:string'>
+                                              <xsd:minLength value='1'></xsd:minLength>
+                                              <xsd:maxLength value='35'></xsd:maxLength>
+                                              <xsd:pattern value='[A-Za-z0-9 \(\)\-\./]*'></xsd:pattern>
+                                            </xsd:restriction>
+                                          </xsd:simpleType>
+                                        </xsd:element>
+                                        <xsd:element name='CO2' minOccurs='1' maxOccurs='1'>
+                                          <xsd:simpleType>
+                                            <xsd:union memberTypes='fps:FullPaymentSubmission_IRnonNegativeMax999IntegerType fps:FullPaymentSubmission_XType'></xsd:union>
+                                          </xsd:simpleType>
+                                        </xsd:element>
+                                        <xsd:element name='Fuel' minOccurs='1' maxOccurs='1'>
+                                          <xsd:simpleType>
+                                            <xsd:restriction base='xsd:string'>
+                                              <xsd:enumeration value='D'>
+                                                <xsd:annotation>
+                                                  <xsd:documentation>Diesel</xsd:documentation>
+                                                </xsd:annotation>
+                                              </xsd:enumeration>
+                                              <xsd:enumeration value='E'>
+                                                <xsd:annotation>
+                                                  <xsd:documentation>Electric</xsd:documentation>
+                                                </xsd:annotation>
+                                              </xsd:enumeration>
+                                              <xsd:enumeration value='H'>
+                                                <xsd:annotation>
+                                                  <xsd:documentation>Hybrid</xsd:documentation>
+                                                </xsd:annotation>
+                                              </xsd:enumeration>
+                                              <xsd:enumeration value='A'>
+                                                <xsd:annotation>
+                                                  <xsd:documentation>All other</xsd:documentation>
+                                                </xsd:annotation>
+                                              </xsd:enumeration>
+                                            </xsd:restriction>
+                                          </xsd:simpleType>
+                                        </xsd:element>
+                                        <xsd:element name='ID' minOccurs='0' maxOccurs='1'>
+                                          <xsd:simpleType>
+                                            <xsd:restriction base='fps:FullPaymentSubmission_CharsetB'>
+                                              <xsd:minLength value='1'></xsd:minLength>
+                                              <xsd:maxLength value='10'></xsd:maxLength>
+                                            </xsd:restriction>
+                                          </xsd:simpleType>
+                                        </xsd:element>
+                                        <xsd:element name='Amendment' type='fps:FullPaymentSubmission_YesNoType' minOccurs='1' maxOccurs='1'></xsd:element>
+                                        <xsd:element name='Price' minOccurs='1' maxOccurs='1'>
+                                          <xsd:simpleType>
+                                            <xsd:restriction base='fps:FullPaymentSubmission_IRmonetaryType'>
+                                              <xsd:maxInclusive value='9999999.99'></xsd:maxInclusive>
+                                              <xsd:minInclusive value='1000.00'></xsd:minInclusive>
+                                            </xsd:restriction>
+                                          </xsd:simpleType>
+                                        </xsd:element>
+                                        <xsd:element name='AvailFrom' minOccurs='1' maxOccurs='1'>
+                                          <xsd:simpleType>
+                                            <xsd:restriction base='fps:FullPaymentSubmission_DateType'>
+                                              <xsd:maxInclusive value='2018-04-05'></xsd:maxInclusive>
+                                              <xsd:minInclusive value='2017-04-06'></xsd:minInclusive>
+                                            </xsd:restriction>
+                                          </xsd:simpleType>
+                                        </xsd:element>
+                                        <xsd:element name='CashEquiv' minOccurs='1' maxOccurs='1'>
+                                          <xsd:simpleType>
+                                            <xsd:restriction base='fps:FullPaymentSubmission_IRmonetaryType'>
+                                              <xsd:maxInclusive value='999999999.99'></xsd:maxInclusive>
+                                              <xsd:minInclusive value='-999999999.99'></xsd:minInclusive>
+                                            </xsd:restriction>
+                                          </xsd:simpleType>
+                                        </xsd:element>
+                                        <xsd:element name='AvailTo' minOccurs='0' maxOccurs='1'>
+                                          <xsd:simpleType>
+                                            <xsd:restriction base='fps:FullPaymentSubmission_DateType'>
+                                              <xsd:maxInclusive value='2018-04-05'></xsd:maxInclusive>
+                                              <xsd:minInclusive value='2017-04-06'></xsd:minInclusive>
+                                            </xsd:restriction>
+                                          </xsd:simpleType>
+                                        </xsd:element>
+                                        <xsd:element name='FreeFuel' minOccurs='0' maxOccurs='1'>
+                                          <xsd:complexType>
+                                            <xsd:sequence>
+                                              <xsd:element name='Provided' minOccurs='1' maxOccurs='1'>
+                                                <xsd:simpleType>
+                                                  <xsd:restriction base='fps:FullPaymentSubmission_DateType'>
+                                                    <xsd:maxInclusive value='2018-04-05'></xsd:maxInclusive>
+                                                    <xsd:minInclusive value='2017-04-06'></xsd:minInclusive>
+                                                  </xsd:restriction>
+                                                </xsd:simpleType>
+                                              </xsd:element>
+                                              <xsd:element name='CashEquiv' minOccurs='1' maxOccurs='1'>
+                                                <xsd:simpleType>
+                                                  <xsd:restriction base='fps:FullPaymentSubmission_IRmonetaryType'>
+                                                    <xsd:maxInclusive value='999999999.99'></xsd:maxInclusive>
+                                                    <xsd:minInclusive value='-999999999.99'></xsd:minInclusive>
+                                                  </xsd:restriction>
+                                                </xsd:simpleType>
+                                              </xsd:element>
+                                              <xsd:element name='Withdrawn' minOccurs='0' maxOccurs='1'>
+                                                <xsd:simpleType>
+                                                  <xsd:restriction base='fps:FullPaymentSubmission_DateType'>
+                                                    <xsd:maxInclusive value='2018-04-05'></xsd:maxInclusive>
+                                                    <xsd:minInclusive value='2017-04-06'></xsd:minInclusive>
+                                                  </xsd:restriction>
+                                                </xsd:simpleType>
+                                              </xsd:element>
+                                            </xsd:sequence>
+                                          </xsd:complexType>
+                                        </xsd:element>
+                                      </xsd:sequence>
+                                    </xsd:complexType>
+                                  </xsd:element>
+                                </xsd:sequence>
+                              </xsd:complexType>
+                            </xsd:element>
                             <xsd:element name='EmpeePenContribnsPaid' minOccurs='0' maxOccurs='1'>
                               <xsd:simpleType>
                                 <xsd:restriction base='fps:FullPaymentSubmission_IRmonetaryType'>
                                   <xsd:maxInclusive value='999999999.99'></xsd:maxInclusive>
                                   <xsd:minInclusive value='-999999999.99'></xsd:minInclusive>
@@
             <xsd:sequence>
               <xsd:element name='BecauseSchemeCeased' type='fps:FullPaymentSubmission_YesType' minOccurs='0' maxOccurs='1'></xsd:element>
               <xsd:element name='DateSchemeCeased' minOccurs='0' maxOccurs='1'>
                 <xsd:simpleType>
                   <xsd:restriction base='fps:FullPaymentSubmission_DateType'>
-                    <xsd:maxInclusive value='2017-04-05'></xsd:maxInclusive>
-                    <xsd:minInclusive value='2016-04-06'></xsd:minInclusive>
+                    <xsd:maxInclusive value='2018-04-05'></xsd:maxInclusive>
+                    <xsd:minInclusive value='2017-04-06'></xsd:minInclusive>
                   </xsd:restriction>
                 </xsd:simpleType>
               </xsd:element>
               <xsd:element name='ForYear' type='fps:FullPaymentSubmission_YesType' minOccurs='0' maxOccurs='1'></xsd:element>
             </xsd:sequence>
@@
     </xsd:restriction>
   </xsd:simpleType>
   <xsd:simpleType name='FullPaymentSubmission_IRmonetaryType'>
     <xsd:restriction base='fps:FullPaymentSubmission_IRdecimalType'></xsd:restriction>
   </xsd:simpleType>
+  <xsd:simpleType name='FullPaymentSubmission_IRnonNegativeMax999IntegerType'>
+    <xsd:restriction base='xsd:nonNegativeInteger'>
+      <xsd:maxInclusive value='999'></xsd:maxInclusive>
+    </xsd:restriction>
+  </xsd:simpleType>
   <xsd:simpleType name='FullPaymentSubmission_IRnonNegativeMonetaryType'>
     <xsd:restriction base='fps:FullPaymentSubmission_IRdecimalType'>
       <xsd:minInclusive value='0.00'></xsd:minInclusive>
     </xsd:restriction>
   </xsd:simpleType>
@@
     <xsd:restriction base='xsd:string'>
       <xsd:enumeration value='home'></xsd:enumeration>
       <xsd:enumeration value='work'></xsd:enumeration>
     </xsd:restriction>
   </xsd:simpleType>
+  <xsd:simpleType name='FullPaymentSubmission_XType'>
+    <xsd:restriction base='xsd:string'>
+      <xsd:enumeration value='X'></xsd:enumeration>
+    </xsd:restriction>
+  </xsd:simpleType>
   <xsd:simpleType name='FullPaymentSubmission_YesNoType'>
     <xsd:restriction base='xsd:string'>
       <xsd:enumeration value='no'></xsd:enumeration>
       <xsd:enumeration value='yes'></xsd:enumeration>
     </xsd:restriction>


EmployerPaymentSummary.xsd-2017-v1-0-To-2018-v0-1

@@
 <?xml version="1.0" encoding="UTF-8"?>
 
-<xsd:schema version='1.0' elementFormDefault='qualified' attributeFormDefault='unqualified' id='EmployerPaymentSummary' targetNamespace='http://www.govtalk.gov.uk/taxation/PAYE/RTI/EmployerPaymentSummary/16-17/1' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:eps='http://www.govtalk.gov.uk/taxation/PAYE/RTI/EmployerPaymentSummary/16-17/1'>
+<xsd:schema version='0.1' elementFormDefault='qualified' attributeFormDefault='unqualified' id='EmployerPaymentSummary' targetNamespace='http://www.govtalk.gov.uk/taxation/PAYE/RTI/EmployerPaymentSummary/17-18/1' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:eps='http://www.govtalk.gov.uk/taxation/PAYE/RTI/EmployerPaymentSummary/17-18/1'>
   <xsd:annotation>
     <xsd:appinfo>
       <gms:Metadata xmlns:gms='http://www.govtalk.gov.uk/CM/gms-xs'>
         <gms:Audience>e-service developers</gms:Audience>
         <gms:Contributor>CoreFiling Ltd</gms:Contributor>
         <gms:Creator>HMRC</gms:Creator>
         <gms:Date>
-          <gms:Created>2015-06-19</gms:Created>
+          <gms:Created>2016-07-12</gms:Created>
         </gms:Date>
         <gms:Date>
-          <gms:Modified>2015-11-02</gms:Modified>
+          <gms:Modified>2016-07-12</gms:Modified>
         </gms:Date>
         <gms:Language>[ISO 639-2/B] ENG</gms:Language>
         <gms:Publisher>HMRC</gms:Publisher>
         <gms:Relation>
           <gms:ProvidesDefinitionOf>IRenvelope</gms:ProvidesDefinitionOf>
@@
         </gms:Relation>
         <gms:Relation>
           <gms:ProvidesDefinitionOf>EmployerPaymentSummary_EmailType</gms:ProvidesDefinitionOf>
         </gms:Relation>
         <gms:Relation>
+          <gms:ProvidesDefinitionOf>EmployerPaymentSummary_IRdecimalType</gms:ProvidesDefinitionOf>
+        </gms:Relation>
+        <gms:Relation>
           <gms:ProvidesDefinitionOf>EmployerPaymentSummary_IRheaderStringType</gms:ProvidesDefinitionOf>
         </gms:Relation>
         <gms:Relation>
           <gms:ProvidesDefinitionOf>EmployerPaymentSummary_IRmonetaryType</gms:ProvidesDefinitionOf>
         </gms:Relation>
         <gms:Relation>
+          <gms:ProvidesDefinitionOf>EmployerPaymentSummary_IRwholeUnitsMonetaryType</gms:ProvidesDefinitionOf>
+        </gms:Relation>
+        <gms:Relation>
           <gms:ProvidesDefinitionOf>EmployerPaymentSummary_ISOcurrencyType</gms:ProvidesDefinitionOf>
         </gms:Relation>
         <gms:Relation>
           <gms:ProvidesDefinitionOf>EmployerPaymentSummary_TelephoneStructure</gms:ProvidesDefinitionOf>
         </gms:Relation>
@@
         </gms:Relation>
         <gms:Relation>
           <gms:ProvidesDefinitionOf>EmployerPaymentSummary_YesType</gms:ProvidesDefinitionOf>
         </gms:Relation>
         <gms:Rights>
-          <gms:Copyright>(C) Crown Copyright 2013-2015</gms:Copyright>
+          <gms:Copyright>(C) Crown Copyright 2013-2016</gms:Copyright>
         </gms:Rights>
         <gms:Subject>
           <gms:Category>Economics, Finance and Tax</gms:Category>
         </gms:Subject>
-        <gms:Title>PAYE RTI Employer Payment Summary 2016-17 schema</gms:Title>
+        <gms:Title>PAYE RTI Employer Payment Summary 2017-18 schema</gms:Title>
         <gms:Type>message</gms:Type>
       </gms:Metadata>
     </xsd:appinfo>
   </xsd:annotation>
   <xsd:element name='IRenvelope'>
@@
               <xsd:sequence>
                 <xsd:element name='From' minOccurs='1' maxOccurs='1'>
                   <xsd:simpleType>
                     <xsd:restriction base='eps:EmployerPaymentSummary_DateType'>
                       <xsd:pattern value='\d{4}-\d{2}-06'></xsd:pattern>
-                      <xsd:minInclusive value='2016-04-06'></xsd:minInclusive>
+                      <xsd:minInclusive value='2017-04-06'></xsd:minInclusive>
                     </xsd:restriction>
                   </xsd:simpleType>
                 </xsd:element>
                 <xsd:element name='To' minOccurs='1' maxOccurs='1'>
                   <xsd:simpleType>
                     <xsd:restriction base='eps:EmployerPaymentSummary_DateType'>
                       <xsd:pattern value='\d{4}-\d{2}-05'></xsd:pattern>
-                      <xsd:maxInclusive value='2017-04-05'></xsd:maxInclusive>
+                      <xsd:maxInclusive value='2018-04-05'></xsd:maxInclusive>
                     </xsd:restriction>
                   </xsd:simpleType>
                 </xsd:element>
               </xsd:sequence>
             </xsd:complexType>
@@
                 </xsd:simpleType>
               </xsd:element>
             </xsd:sequence>
           </xsd:complexType>
         </xsd:element>
+        <xsd:element name='ApprenticeshipLevy' minOccurs='0' maxOccurs='1'>
+          <xsd:complexType>
+            <xsd:sequence>
+              <xsd:element name='LevyDueYTD' minOccurs='1' maxOccurs='1'>
+                <xsd:simpleType>
+                  <xsd:restriction base='eps:EmployerPaymentSummary_IRwholeUnitsMonetaryType'>
+                    <xsd:maxInclusive value='99999999.00'></xsd:maxInclusive>
+                    <xsd:minInclusive value='0.00'></xsd:minInclusive>
+                  </xsd:restriction>
+                </xsd:simpleType>
+              </xsd:element>
+              <xsd:element name='TaxMonth' minOccurs='1' maxOccurs='1'>
+                <xsd:simpleType>
+                  <xsd:restriction base='xsd:string'>
+                    <xsd:pattern value='[1-9]|1[0-2]'></xsd:pattern>
+                  </xsd:restriction>
+                </xsd:simpleType>
+              </xsd:element>
+              <xsd:element name='AnnualAllce' minOccurs='1' maxOccurs='1'>
+                <xsd:simpleType>
+                  <xsd:restriction base='eps:EmployerPaymentSummary_IRmonetaryType'>
+                    <xsd:maxInclusive value='15000.00'></xsd:maxInclusive>
+                    <xsd:minInclusive value='0.00'></xsd:minInclusive>
+                  </xsd:restriction>
+                </xsd:simpleType>
+              </xsd:element>
+            </xsd:sequence>
+          </xsd:complexType>
+        </xsd:element>
         <xsd:element name='Account' minOccurs='0' maxOccurs='1'>
           <xsd:complexType>
             <xsd:sequence>
               <xsd:element name='AccountHoldersName' minOccurs='1' maxOccurs='1'>
                 <xsd:simpleType>
@@
             <xsd:sequence>
               <xsd:element name='BecauseSchemeCeased' type='eps:EmployerPaymentSummary_YesType' minOccurs='0' maxOccurs='1'></xsd:element>
               <xsd:element name='DateSchemeCeased' minOccurs='0' maxOccurs='1'>
                 <xsd:simpleType>
                   <xsd:restriction base='eps:EmployerPaymentSummary_DateType'>
-                    <xsd:maxInclusive value='2017-04-05'></xsd:maxInclusive>
-                    <xsd:minInclusive value='2016-04-06'></xsd:minInclusive>
+                    <xsd:maxInclusive value='2018-04-05'></xsd:maxInclusive>
+                    <xsd:minInclusive value='2017-04-06'></xsd:minInclusive>
                   </xsd:restriction>
                 </xsd:simpleType>
               </xsd:element>
               <xsd:element name='ForYear' type='eps:EmployerPaymentSummary_YesType' minOccurs='0' maxOccurs='1'></xsd:element>
             </xsd:sequence>
@@
       <xsd:minLength value='3'></xsd:minLength>
       <xsd:maxLength value='254'></xsd:maxLength>
       <xsd:pattern value="[^@'&lt;&gt;&quot;]+@[^@'&lt;&gt;&quot;]+"></xsd:pattern>
     </xsd:restriction>
   </xsd:simpleType>
+  <xsd:simpleType name='EmployerPaymentSummary_IRdecimalType'>
+    <xsd:restriction base='xsd:decimal'>
+      <xsd:pattern value='-?(([1-9][0-9]*)|0)\.[0-9]{2}'></xsd:pattern>
+    </xsd:restriction>
+  </xsd:simpleType>
   <xsd:simpleType name='EmployerPaymentSummary_IRheaderStringType'>
     <xsd:restriction base='xsd:string'>
       <xsd:pattern value="[A-Za-z0-9 &amp;'\(\)\*,\-\./]*"></xsd:pattern>
     </xsd:restriction>
   </xsd:simpleType>
   <xsd:simpleType name='EmployerPaymentSummary_IRmonetaryType'>
-    <xsd:restriction base='xsd:decimal'>
-      <xsd:pattern value='-?(([1-9][0-9]*)|0)\.[0-9]{2}'></xsd:pattern>
+    <xsd:restriction base='eps:EmployerPaymentSummary_IRdecimalType'></xsd:restriction>
+  </xsd:simpleType>
+  <xsd:simpleType name='EmployerPaymentSummary_IRwholeUnitsMonetaryType'>
+    <xsd:restriction base='eps:EmployerPaymentSummary_IRdecimalType'>
+      <xsd:pattern value='.*\.00'></xsd:pattern>
     </xsd:restriction>
   </xsd:simpleType>
   <xsd:simpleType name='EmployerPaymentSummary_ISOcurrencyType'>
     <xsd:restriction base='xsd:string'>
       <xsd:enumeration value='EUR'>


NINOverificationRequest.xsd-v1-1-To-v1-1

@@
         <gms:Creator>HMRC</gms:Creator>
         <gms:Date>
           <gms:Created>2011-03-18</gms:Created>
         </gms:Date>
         <gms:Date>
-          <gms:Modified>2015-11-02</gms:Modified>
+          <gms:Modified>2016-07-12</gms:Modified>
         </gms:Date>
         <gms:Language>[ISO 639-2/B] ENG</gms:Language>
         <gms:Publisher>HMRC</gms:Publisher>
         <gms:Relation>
           <gms:ProvidesDefinitionOf>IRenvelope</gms:ProvidesDefinitionOf>
